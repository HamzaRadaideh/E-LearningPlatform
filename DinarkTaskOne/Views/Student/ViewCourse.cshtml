@model DinarkTaskOne.Models.ViewModels.CourseViewModel

<div class="container mt-5">
    <!-- Course Title, Description, and Total Quiz Score -->
    <div class="row align-items-center mb-4">
        <div class="col-md-12 text-center">
            <h2 class="fw-bold text-primary">Course: @Model.Title</h2>
            <p class="text-muted">@Model.Description</p>
            <p><strong>Total Quiz Score:</strong> @Model.CombinedQuizScore / @Model.MaxPossibleScore</p>
            <p><strong>Progress:</strong> @Model.PercentageScore%</p> <!-- Display progress as percentage -->
        </div>
    </div>

    <hr />

    <!-- Course Content Section -->
    <div class="row">
        <div class="col-md-12">
            <h4 class="text-primary mb-3">Course Content</h4>
            <div class="accordion" id="courseContentAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="contentHeading">
                        <button class="accordion-button fw-bold text-primary" type="button" data-bs-toggle="collapse" data-bs-target="#contentCollapse" aria-expanded="true" aria-controls="contentCollapse">
                            All Course Content
                        </button>
                    </h2>
                    <div id="contentCollapse" class="accordion-collapse collapse show" aria-labelledby="contentHeading" data-bs-parent="#courseContentAccordion">
                        <div class="accordion-body">
                            <!-- Display Sorted Content (Materials, Announcements, Quizzes) -->
                            <ul class="list-group">
                                @foreach (var item in Model.SortedContent)
                                {
                                    if (item.Type == "Material")
                                    {
                                        var material = (DinarkTaskOne.Models.ManageCourse.MaterialsModel)item.Content;
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="bi bi-file-earmark-text"></i> @material.Description</span>
                                            <a href="~/Uploads/@material.FilePath" class="badge bg-primary">@material.FileType</a>
                                        </li>
                                    }
                                    else if (item.Type == "Announcement")
                                    {
                                        var announcement = (DinarkTaskOne.Models.ManageCourse.AnnouncementModel)item.Content;
                                        <li class="list-group-item list-group-item-@announcement.Type.ToLower()">
                                            <i class="bi bi-megaphone-fill"></i> @announcement.Content
                                        </li>
                                    }
                                    else if (item.Type == "Quiz")
                                    {
                                        var quiz = (DinarkTaskOne.Models.MakeQuiz.QuizModel)item.Content;
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <span><i class="bi bi-question-circle"></i> @quiz.Title</span>
                                            <a asp-action="TakeQuiz" asp-controller="Student" asp-route-quizId="@quiz.QuizId" class="btn btn-primary">Take Quiz</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
